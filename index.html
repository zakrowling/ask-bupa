<!DOCTYPE html>
<html>
<head>
    <title>Voice to Text</title>
</head>
<body>
    <h2>Voice search eg. 'single parents cover'</h2>
    <button id="startButton">Ask Bupa</button>
    <div id="output"></div>

    <script>
        const startButton = document.getElementById('startButton');
        const outputDiv = document.getElementById('output');
        
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition || window.mozSpeechRecognition || window.msSpeechRecognition)();
        recognition.lang = 'en-US';
        
        recognition.onstart = () => {
            startButton.textContent = 'Listening...';
            outputDiv.textContent = '';
        };
        
        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            outputDiv.textContent = transcript;
            if (outputDiv.textContent) {
                const matches = outputDiv.textContent.replace(/ /g, '+');
                const searchURL = "https://www.bupa.com.au/utility/search-results?q=" + matches;
                window.open(searchURL, "_blank");
            }
            else if (outputDiv.textContent.includes("family cover")) {
                window.open("https://www.bupa.com.au/health-insurance/family", "_blank");
            }
            else if (outputDiv.textContent.includes("singles cover")) {
                window.open("https://www.bupa.com.au/health-insurance/singles", "_blank");
            }
            else if (outputDiv.textContent.includes("couples cover")) {
                window.open("https://www.bupa.com.au/health-insurance/couples", "_blank");
            }
            else if (outputDiv.textContent.includes("single parents cover")) {
                window.open("https://www.bupa.com.au/health-insurance/single-parents", "_blank");
            }
            else if (outputDiv.textContent.includes("quote")) {
                window.open("https://www.bupa.com.au/health-insurance/quote", "_blank");
            }
            else if (outputDiv.textContent.includes("provider")) {
                window.open("https://www.bupa.com.au/find-a-provider", "_blank");
            }
        };
        
        recognition.onend = () => {
            startButton.textContent = 'Ask Bupa';
        };
        
        startButton.addEventListener('click', () => {
            recognition.start();
        });
    </script>
</body>
</html>
